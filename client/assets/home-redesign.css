:root {
  --psk-neon-cyan: #38f9ff;
  --psk-neon-magenta: #ff4fd8;
  --psk-deep-ocean: #031a44;
  --psk-mid-ocean: #0b2f66;
  --psk-soft-white: #f5fbff;
  --psk-gold: #ffd166;
}

body.psk-home-experiment {
  background: radial-gradient(circle at 20% 20%, rgba(56, 249, 255, 0.4), transparent 40%),
              radial-gradient(circle at 80% 0%, rgba(255, 79, 216, 0.35), transparent 45%),
              linear-gradient(135deg, var(--psk-deep-ocean), var(--psk-mid-ocean));
  color: var(--psk-soft-white);
  overflow: hidden;
}

body.psk-home-experiment::before,
body.psk-home-experiment::after {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -1;
}

body.psk-home-experiment::before {
  background: radial-gradient(circle at 25% 80%, rgba(56, 249, 255, 0.25), transparent 55%),
              radial-gradient(circle at 70% 70%, rgba(255, 79, 216, 0.25), transparent 45%);
  filter: blur(40px);
  animation: psk-drift 24s ease-in-out infinite;
}

body.psk-home-experiment::after {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="140" height="140" viewBox="0 0 140 140" fill="none" stroke="rgba(255,255,255,0.18)" stroke-width="2"><text x="10" y="65" font-size="38">♪</text><text x="70" y="130" font-size="34">♬</text></svg>');
  opacity: 0.55;
  animation: psk-notes 22s linear infinite;
}

@keyframes psk-drift {
  0% { transform: translateY(0); }
  50% { transform: translateY(-25px); }
  100% { transform: translateY(0); }
}

@keyframes psk-notes {
  0% { background-position: 0 0; }
  100% { background-position: 0 -900px; }
}

body.psk-home-experiment #langBtn {
  background: rgba(4, 26, 68, 0.65);
  border: 1px solid rgba(245, 251, 255, 0.3);
  border-radius: 999px;
  backdrop-filter: blur(9px);
  font-size: 1rem;
  padding: 10px 24px;
  color: var(--psk-soft-white);
  box-shadow: 0 10px 25px rgba(3, 26, 68, 0.5);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  z-index: 2;
}

body.psk-home-experiment #langBtn:hover {
  transform: translateY(-2px);
  box-shadow: 0 0 18px rgba(56, 249, 255, 0.4);
}

body.psk-home-experiment .psk-home-stage {
  background: rgba(3, 26, 68, 0.6);
  border-radius: 32px;
  padding: clamp(32px, 6vw, 56px);
  box-shadow: 0 35px 90px rgba(3, 26, 68, 0.8);
  border: 1px solid rgba(255, 255, 255, 0.15);
  position: relative;
  width: min(92vw, 760px);
  text-align: center;
}

body.psk-home-experiment .psk-home-stage::before {
  content: '';
  position: absolute;
  inset: -2px;
  border-radius: inherit;
  background: linear-gradient(120deg, rgba(56, 249, 255, 0.45), rgba(255, 79, 216, 0.35));
  filter: blur(25px);
  opacity: 0.7;
  z-index: -1;
}

body.psk-home-experiment h1 {
  font-size: clamp(3rem, 8vw, 5.5rem);
  letter-spacing: 0.08em;
  margin: 0;
  text-shadow: 0 0 25px rgba(255, 255, 255, 0.3);
}

body.psk-home-experiment h2 {
  font-size: clamp(1.5rem, 3vw, 2.4rem);
  margin: 24px 0 10px;
  color: rgba(245, 251, 255, 0.9);
}

body.psk-home-experiment .psk-home-cta-group {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 16px;
  margin: 24px 0 10px;
}

body.psk-home-experiment button {
  padding: 16px 40px;
  font-size: clamp(1.2rem, 3vw, 2rem);
  border: none;
  border-radius: 999px;
  cursor: pointer;
  color: var(--psk-soft-white);
  background: linear-gradient(135deg, rgba(56, 249, 255, 0.95), rgba(255, 79, 216, 0.9));
  box-shadow: 0 18px 45px rgba(3, 26, 68, 0.5);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}

body.psk-home-experiment button:hover {
  transform: translateY(-6px) scale(1.02);
  box-shadow: 0 22px 50px rgba(56, 249, 255, 0.35);
}

body.psk-home-experiment .code-box {
  margin: 30px auto 0;
  padding: 24px;
  background: rgba(4, 26, 68, 0.75);
  border-radius: 28px;
  font-size: clamp(2rem, 6vw, 4rem);
  letter-spacing: 18px;
  font-weight: 800;
  border: 1px solid rgba(255, 255, 255, 0.18);
  box-shadow: inset 0 0 25px rgba(56, 249, 255, 0.2);
}

body.psk-home-experiment .code-box div:nth-child(2) {
  font-size: clamp(1rem, 3vw, 1.4rem);
  margin-top: 18px;
  letter-spacing: normal;
  color: rgba(245, 251, 255, 0.85);
}

body.psk-home-experiment .code-box button {
  margin-top: 20px;
  font-size: 1.4rem;
  padding: 12px 28px;
  background: linear-gradient(135deg, #4df4b7, #38f9ff);
  letter-spacing: normal;
}

body.psk-home-experiment .psk-home-stage::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="160" height="160" viewBox="0 0 160 160" fill="none"><circle cx="30" cy="40" r="2" fill="rgba(255,255,255,0.3)"/><circle cx="120" cy="90" r="3" fill="rgba(255,255,255,0.25)"/></svg>');
  opacity: 0.25;
  animation: psk-stage-drift 18s linear infinite;
  pointer-events: none;
}

@keyframes psk-stage-drift {
  0% { transform: translateY(0); }
  100% { transform: translateY(-200px); }
}

/* ===== SPA Lobby Integration ===== */
body.psk-home-experiment #lobbyContainer {
  position: relative;
  min-height: 100vh;
  padding: clamp(32px, 5vw, 80px);
  display: flex;
  justify-content: center;
  align-items: center;
}

body.psk-home-experiment #lobbyContainer.hidden {
  display: none;
}

body.psk-home-experiment .psk-lang-switcher {
  position: absolute;
  top: clamp(16px, 3vw, 32px);
  right: clamp(16px, 4vw, 40px);
  display: flex;
  gap: 10px;
  z-index: 3;
}

body.psk-home-experiment .psk-lang-btn {
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.35);
  background: rgba(3, 26, 68, 0.65);
  padding: 8px 18px;
  font-size: 0.95rem;
  color: var(--psk-soft-white);
  cursor: pointer;
  backdrop-filter: blur(8px);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

body.psk-home-experiment .psk-lang-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 0 16px rgba(56, 249, 255, 0.45);
}

body.psk-home-experiment .psk-ambient-notes {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}

body.psk-home-experiment .psk-ambient-notes span {
  position: absolute;
  font-size: 2rem;
  color: rgba(255, 255, 255, 0.25);
  animation: psk-note-float 16s linear infinite;
}

body.psk-home-experiment .psk-ambient-notes span:nth-child(1) { left: 10%; animation-duration: 18s; }
body.psk-home-experiment .psk-ambient-notes span:nth-child(2) { left: 30%; animation-duration: 20s; animation-delay: -4s; }
body.psk-home-experiment .psk-ambient-notes span:nth-child(3) { left: 55%; animation-duration: 22s; animation-delay: -2s; }
body.psk-home-experiment .psk-ambient-notes span:nth-child(4) { left: 75%; animation-duration: 19s; animation-delay: -6s; }
body.psk-home-experiment .psk-ambient-notes span:nth-child(5) { left: 90%; animation-duration: 21s; animation-delay: -1s; }

@keyframes psk-note-float {
  0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
  20% { opacity: 0.4; }
  80% { opacity: 0.08; }
  100% { transform: translateY(-15vh) rotate(360deg); opacity: 0; }
}

body.psk-home-experiment .lobby-input-group input {
  background: rgba(3, 26, 68, 0.7);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: var(--psk-soft-white);
  border-radius: 20px;
  padding: 16px 20px;
  font-size: 1.1rem;
  text-align: center;
  box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.35);
}

body.psk-home-experiment .lobby-input-group input:focus {
  outline: none;
  border-color: var(--psk-neon-cyan);
  box-shadow: 0 0 18px rgba(56, 249, 255, 0.35);
}

body.psk-home-experiment .lobby-input-group input::placeholder {
  color: rgba(245, 251, 255, 0.55);
}

body.psk-home-experiment #lobbyContainer .psk-home-cta-group .btn,
body.psk-home-experiment #lobbyContainer .btn-ready,
body.psk-home-experiment #lobbyContainer .btn-start,
body.psk-home-experiment #lobbyContainer #backBtn {
  border-radius: 999px;
  border: none;
  font-size: 1.2rem;
  padding: 16px 32px;
  background: linear-gradient(125deg, rgba(56, 249, 255, 0.95), rgba(255, 79, 216, 0.9));
  box-shadow: 0 20px 45px rgba(3, 26, 68, 0.55);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}

body.psk-home-experiment #lobbyContainer .psk-home-cta-group .btn:hover,
body.psk-home-experiment #lobbyContainer .btn-ready:hover,
body.psk-home-experiment #lobbyContainer .btn-start:hover,
body.psk-home-experiment #lobbyContainer #backBtn:hover {
  transform: translateY(-4px);
  box-shadow: 0 25px 55px rgba(56, 249, 255, 0.35);
}

body.psk-home-experiment #lobbyContainer .btn-ready {
  background: linear-gradient(135deg, #4df4b7, #38f9ff);
}

body.psk-home-experiment #lobbyContainer .btn-ready.ready {
  background: linear-gradient(135deg, #7c5dff, #4f8cff);
}

body.psk-home-experiment #lobbyContainer .btn-start {
  background: linear-gradient(135deg, #ffb347, #ff786a);
}

body.psk-home-experiment #lobbyContainer #backBtn {
  background: linear-gradient(135deg, rgba(149, 165, 166, 0.8), rgba(189, 195, 199, 0.8));
  color: #0b1f3b;
}

body.psk-home-experiment #lobbyContainer .players-list {
  margin-top: 24px;
  padding: 24px;
  border-radius: 28px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.12);
  max-height: 260px;
  overflow-y: auto;
  box-shadow: inset 0 0 30px rgba(3, 26, 68, 0.45);
}

body.psk-home-experiment #lobbyContainer .player-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 18px;
  margin-bottom: 12px;
  border-radius: 18px;
  background: rgba(3, 26, 68, 0.6);
  border: 1px solid rgba(255, 255, 255, 0.08);
  color: var(--psk-soft-white);
  font-size: 1rem;
}

body.psk-home-experiment #lobbyContainer .player-ready {
  color: #64ffda;
  font-weight: 700;
}

body.psk-home-experiment #lobbyContainer .psk-share-card {
  background: rgba(3, 26, 68, 0.55);
  border-radius: 24px;
  padding: 20px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  box-shadow: 0 20px 50px rgba(3, 26, 68, 0.5);
}

body.psk-home-experiment #lobbyContainer .psk-share-card p {
  color: rgba(245, 251, 255, 0.85);
  text-align: center;
}

@media (max-width: 600px) {
  body.psk-home-experiment #langBtn { top: 16px; right: 16px; font-size: 0.95rem; }
  body.psk-home-experiment .psk-home-stage { padding: 28px 18px; }
  body.psk-home-experiment .code-box { letter-spacing: 10px; }
  body.psk-home-experiment button { width: 100%; }
}
